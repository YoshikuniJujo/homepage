構文: deriving Read

<h2>はじめに</h2>

<p>
deriving Showで、
自分で定義した型の値を「いい感じに」表示してくれる関数showができる。
derivingで指定できるのはShowだけではない。
今回はReadを見てみよう。
</p>

<h2>複数のderiving</h2>

<p>
derivingで複数の値を指定するには括弧でくくりコンマでくぎる。
ShowとReadのふたつを指定するには
</p>

<p><code>data Foo = Bar | Baz deriving (Show, Read)</code></p>

<p>とする。</p>

<h2>Read</h2>

<p>
deriving Readで、
自分で定義した型の値を「いい感じに」読みこんでくれる関数readが使える。
関数showで得られた文字列を関数readで読みこむともとの値となる。
関数readの返り値は多相的なので型注釈が必要だ。
</p>

<p><code>data Foo = Bar Bool Char | Baz Int Double deriving (Show, Read)</code></p>

<p><code>% ghci deriving_read.hs<br/>
*Main&gt; show $ Bar False 'c'<br/>
"Bar False 'c'"<br/>
*Main&gt; read it :: Foo<br/>
Bar False 'c'<br/>
*Main&gt; show $ Baz 8 5<br/>
"Baz 8 5.0"<br/>
*Main&gt; read it :: Foo<br/>
Baz 8 5.0</code></p>

<h2>まとめ</h2>

<p>
deriving Readを使えば、「型クラス」を学ぶ前でも、
自分で定義した型の値を文字列から読みこめるようになる。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/nml4.html"
	>「NML(4): 表示」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/interact.html"
	>「関数: 簡易的なIO」へ</a>
</p>
