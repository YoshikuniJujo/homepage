型クラスとは

<p>(工事中 30%)</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/yjslide3/lecture13.hs"
	>lecture13.hs</a>
<a href="/computer/haskell/web_lecture/for_programmer/yjslide3/lecture13.md"
	>lecture13.md</a>
</p>

<h2>はじめに</h2>

<p>
型クラスについて考えるときには
</p>

<ul>
<li>性質</li>
<li>実装と仕様の分離</li>
<li>アドホック多相</li>
</ul>

<p>
といったキーワードへの理解が役に立つ。
</p>

<h2>型クラスとは性質である</h2>

<p>
型クラスEqというものは同値比較が可能という性質を示す。
同じように型クラスOrdは大小比較可能という性質だ。
型クラスは多くの型に共通する「性質」をくくり出したものと言える。
そしてその性質は具体的には「特定の関数を持つ」という形で表される。
</p>

<ul>
<li>同値比較が可能: 関数(==)や(/=)を持つ</li>
<li>大小比較が可能: 関数(&lt;), (&gt;)などを持つ</li>
</ul>

<h2>型クラスとは仕様(API)である</h2>

<p>
性質は特定の関数を持つことで表現される。
型クラスにはその「性質」を満たすための関数のセットが指定されている。
これは見かたをかえると型の仕様を定義したものと考えることができる。
たとえばInt型の値のスタックとなりうるのは以下の仕様を満たす型だ。
</p>

<ul>
<li>Int型の値を1番上に置く関数pushを持つ</li>
<li>Int型の値を1番上から取り出す関数popを持つ</li>
</ul>

<p>
この性質を型クラスにすることでスタックとしての仕様とその実装を分離できる。
ひとつの仕様に対して複数の実装を定義できる。
</p>

<h2>アドホック多相</h2>

<p>
型クラスという仕組みによって「もうひとつの多相性」であるアドホック多相が
実現できる。
アドホックとは「その場しのぎ」といった意味合いで使われる言葉だ。
アドホック多相とはパラメトリック多相のような「本質的」な多相性ではなく、
必要な関数をそれぞれの型に対して別個に定義してやることによる多相性だ。
</p>

<h2>文字列から作られるものは「文字列である」</h2>

<p>
型クラスIsStringのインスタンスとなる型aは関数fromStringを持つ。
関数fromStringは
</p>

<p><code>fromString :: String -&gt; a</code></p>

<p>
のように指定されている。
つまりIsStringであるためには文字列から自身の型の値を返す関数fromStringを
持つ必要があるということだ。
多相的でありながら型の厳格さを維持している。
</p>

<h2>インスタンス</h2>

<ul>
<li>型Intは型クラスOrdのインスタンスである</li>
<li>型Charは型クラスShowのインスタンスである</li>
</ul>

<p>のように「型Tは型クラスCのインスタンスである」と表現する。</p>

<h2>まとめ</h2>

<p>
言葉だけの説明ではよくわからないかもしれない。
具体的な例を見ていこう。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/nml5.html"
	>「NML(5): スタンドアロンなデコーダ、エンコーダ」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/touch_type_class.html"
	>「型クラスに触れる」へ</a>
</p>
