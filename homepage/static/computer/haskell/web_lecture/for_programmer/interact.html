関数: 簡易的なIO

<h2>はじめに</h2>

<p>
そろそろ現実世界とやりとりしたいよね。
IOモナドを学ぶまえに簡易的な入出力のやりかたを見る。
</p>

<h2>すべてのプログラムはフィルタである</h2>

<p>
「UNIXという考え方」で「すべてのプログラムはフィルタである」とある。
「フィルタ」とは入力を変換して出力するものという意味だ。
ファイルのフォーマットを変換するプログラムなどはわかりやすくフィルタである。
ゲームなどはフィルタっぽくない。
しかし、これも「時間」と「ユーザの入力」の組の並びという入力値を変換して
「画面」の並びとして出力するプログラムと考えればフィルタだ。
</p>

<p>
すべてのプログラムはフィルタである。
しかし、最もフィルタっぽいプログラムは標準入力からの入力を変換して
標準出力に出力するプログラムだ。
</p>

<h2>String -&gt; String</h2>

<p>
文字列を文字列に変換する関数がある。
これがあればフィルタを作成するには十分だ。
String -&gt; String型の関数をフィルタに変換したい。
</p>

<h2>あるよ</h2>

<p>String -&gt; String型の関数をフィルタに変換する関数がある。</p>

<p><code>interact :: (String -&gt; String) -&gt; IO ()</code></p>

<p>
IO ()という見なれない型が出てきた。
入出力できる機械を表す値の型と考えておく。
interactは文字列変換関数をとって機械を返す関数だ。
</p>

<p><code>% ghci<br/>
Prelude&gt; :t interact<br/>
(String -&gt; String) -&gt; IO ()<br/>
Prelude&gt; :t interact id<br/>
IO ()</code></p>

<h2>まとめ</h2>

<p>
関数interactは
「文字列を変換する関数」を「フィルタの動作を行う機械」に変換する関数だ。
</p>

<!--
<h2>対話環境では</h2>

<p>対話環境で「機械」以外の値は文字列化されて表示される。</p>

<p><code>% ghci<br/>
Prelude&gt; 8<br/>
8<br/>
Prelude&gt; True<br/>
True</code></p>

<p>対話環境に「機械」を与えるとその機械をその場で動かしてくれる。</p>

<p><code>% ghci<br/>
Prelude&gt; :m Data.Char<br/>
Prelude&gt; :t map toUpper<br/>
[Char] -&gt; [Char]<br/>
Prelude&gt; map toUpper "Haskell"<br/>
"HASKELL"<br/>
Prelude&gt; interact $ map toUpper<br/>
HHaAsSkKeElL</code></p>
-->

<p>
<a href="/computer/haskell/web_lecture/for_programmer/deriving_read.html"
	>「構文: deriving Read」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/main.html"
	>「機能: main」へ</a>
</p>
