リストによる「くりかえし」の空間効率

<h2>空間効率の問題は?</h2>

<p>
空間効率とは、簡単に言えば、関数を実行する際に使うメモリの使用量のこと。
リストによる「くりかえし」の実装は一見、空間効率が非常に悪いように見える。
いちいち全要素のリストを作るのであれば、そのぶんのメモリの確保が必要だ。
</p>

<h2>問題ない</h2>

<p>
Haskellの遅延性が生きてくる。
</p>

<p>
「リストを作成した」と思ったとき、実はリストは作成されていない。
リストの各要素はそれが本当に必要になるまでは作成されないのだ。
そして、それらの要素は、その先で使わなければGCされる。
今回のような使いかたでは、リストに含まれる要素は
前から順に使われていき、一度使われた要素は2度使われることはない。
このような場合、それぞれの要素に使われるメモリは確保されるたびに
解放されていく。
</p>

<p>
これは手続き的に実装した「くりかえし」の動作とよく似ている。
つまり、Haskellでは「リストを受け渡す」ような書きかたで、
手続き的な「くりかえし」の実装を実現することができるということだ。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/map.html"
	>「転写」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/list_as_data.html"
	>「データ構造としてのリスト」へ</a>
</p>
