アドホック多相関数iff

<p>(工事中 90%)</p>

<p><a href="/computer/haskell/web_lecture/for_programmer/codes/boolLike.hs"
	>boolLike.hs</a></p>

<h2>はじめに</h2>

<p>
クラス関数を利用することでアドホック多相関数を定義することができる。
</p>

<h2>アドホック多相とは</h2>

<p>
アドホックとは「その場しのぎ」や「限定目的の」といった意味だ。
アドホック多相ではそれぞれの型にそれ専用のクラス関数を定義することで多相性を
実現する。
それぞれの型に合わせたアドホックな関数ということだ。
</p>

<h2>アドホック多相関数iff</h2>

<p>この関数の型宣言は真偽値として使う型を型bとして以下のように書ける。</p>

<p><code>iff :: b -&gt; a -&gt; a -&gt; a</code></p>

<p>
第1引数が真偽値、第2引数が真だったときの値、第3引数が偽だったときの値だ。
真だったときの値と偽だったときの値と返り値は同じである必要がある。
型bは何でもいいわけではない。
型クラスBoolLikeのインスタンスでなければならない。
</p>

<p><code>iff :: BoolLike b =&gt; b -&gt; a -&gt; a -&gt; a</code></p>

<p>
BoolLike b =&gt;は型bが型クラスBoolLikeであるという制約を追加している。
これが型クラス制約だ。
これによって型bがtoBool :: b -&gt; Boolを持つことが保証される。
</p>

<p><code>iff b x y = if toBool b then x else y<code></p>

<p><code>% ghci boolLike.hs<br/>
*Main&gt; iff 8 "8 is true." "8 is false."<br/>
"8 is true."<br/>
*Main&gt; iff 0 "0 is true." "0 is false."<br/>
"0 is false."<br/>
*Main&gt; iff '0' "'0' is true." "'0' is false."<br/>
"'0' is false."</code></p>

<h2>構文</h2>

<p>アドホック多相関数の型には先頭に型クラス制約</p>

<p><code>型クラス名 型変数 =&gt;</code></p>

<p>をつける。</p>

<h2>まとめ</h2>

<p>
クラス関数を利用するとアドホック多相関数を定義できる。
アドホック多相関数の型には型クラス制約をつける。
</p>

<h2>課題</h2>

<ol>
<li>リストからtrueとして扱われるものだけを取り出す関数truesを定義せよ
	<ul>
	<li>trues [8, 0, 2, 0, 0, 5, 5, 1]は[8, 2, 5, 5, 1]に</li>
	<li>trues "abc01234\0"は"abc1234"になる</li>
	</ul></li>
</ol>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/boollike_basic_types.html"
	>「基本的な型を型クラスBoolLikeのインスタンスにする」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/boollike_complex_types.html"
	>「複合的な型を型クラスBoolLikeのインスタンスにする」へ</a>
</p>
