リストによる「くりかえし」: ろ過

<h2>3の倍数のみ</h2>

<p>0から3nまでの整数の3の倍数のみの総和を求める。</p>

<h3>手続き的に</h3>

<ol>
<li>変数i, sを用意</li>
<li>変数i, sを0で初期化</li>
<li>iが3の倍数ならsにiを足したものをsに代入</li>
<li>iに1足したものをiに代入</li>
<li>iが3n以下なら3へ、そうでなければ6へ</li>
<li>変数sの値を返す</li>
</ol>

<h3>リストで</h3>

<ol>
<li>0から3nまでの整数のリストを作成</li>
<li>リストから3の倍数だけを取り出す</li>
<li>総和を求める</li>
</ol>

<h2>ろ過</h2>

<p>
リストから条件を満たすものだけをとりだすことを「ろ過」と呼ぶ。
関数filterが用意されている。
関数filterは第1引数にBool値を返す関数をとる。
3の倍数かどうかは3で割った余りが0と等しいかどうか調べれば良い。
</p>

<p><code>(== 0) . (`mod` 3)</code></p>

<p>列挙と総和のあいだにfilterによるろ過をはさむ。</p>

<p><a href="/computer/haskell/web_lecture/for_programmer/10_filter/sum3N.hs"
	>sum3N.hs</a></p>

<pre><code>sum3N :: Integer -&gt; Integer
sum3N n = sum $ filter ((== 0) . (`mod` 3)) [0 .. 3 * n]</code></pre>

<p><code>% ghci sum3N.hs<br/>
*Main&gt; sum3N 10<br/>
165</code></p>

<h2>まとめ</h2>

<p>
列挙した値のうち条件を満たすもののみを蓄積の対象にした。
要素をしぼりこんだ新しいリストを作成する。
しぼりこむ段階をろ過と呼ぶ。
第1引数にBool値を返す関数をとる関数filterを使う。
</p>

<h2>課題</h2>

<ol>
<li>1から2 * n + 1までのすべての奇数の積を求める関数productOddsを作成せよ
	<ul>
	<li>奇数であることを確認する関数oddを使う</li>
	</ul></li>
</ol>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/enum_accum.html"
	>「列挙と蓄積」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/map.html"
	>「転写」へ</a>
</p>
