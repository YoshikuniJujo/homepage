モジュールの読み込み

<h2>はじめに</h2>

<p>
標準ライブラリには様々な有用な関数がある。
それらを使いこなすことが効率的な開発のコツだ。
</p>

<h2>Preludeモジュール</h2>

<p>
対話環境を立ち上げる。
</p>

<p><code>% ghci<br/>
Prelude&gt;</code></p>

<p>
プロンプトに'Prelude'とある。
何だろうか。
何も指定しなくてもPreludeというモジュールが暗黙のうちに読み込まれる。
'Prelude'とあるのは、
Preludeというモジュールが読み込まれ
公開している関数やその他の値が使用可能であるということだ。
<p>

<p>Preludeを読み込まないようにするオプションがある。</p>

<p><code>% ghci -XNoImplicitPrelude<br/>
&gt;</code></p>

<p>
プロンプトの'Prelude'の文字が消えた。
基本的な関数が未定義となる。
</p>

<p><code>&gt; 3<br/>
3<br/>
&gt; 3 + 8<br/>
&lt;interactive&gt;:X:Y: Not in scope `+'</code></p>

<p>
演算子(+)はPreludeモジュールから公開されている。
Preludeモジュールを読み込まないと使えない。
</p>

<h2>Mainモジュール</h2>

<p>空のファイルを作成しそれに'empty.hs'という名前をつける。</p>

<p>% ghci empty.hs<br/>
*Main&gt;</p>

<p>
プロンプトに'*Main'とある。
ファイルに書かれたHaskellのコードはMainモジュールとなる。
前についている'*'は何だろう。
'*'はそのモジュールの「なか」にいるということだ。
Mainモジュール内の公開されていない関数や値が使える。
</p>

<h2>対話環境でのモジュールの読み込み</h2>

<p>
対話環境でのモジュールの読み込みは':m'または':module'だ。
</p>

<p><code>% ghci<br/>
Prelude&gt; :m Data.Char<br/>
Prelude Data.Char&gt; toLower 'L'<br/>
'l'</code></p>

<p>
Data.Charモジュールから公開されているtoLower関数を使った。
Data.MaybeモジュールのfromMaybe関数を使ってみよう。
</p>

<p><code>Prelude Data.Char&gt; :m Data.Maybe<br/>
Prelude Data.Maybe&gt; fromMaybe 0 (Just 8)<br/>
8<br/>
Prelude Data.Maybe&gt; fromMaybe 0 Nothing<br/>
0<br/>
Prelude Data.Maybe&gt; toLower 'L'<br/>
<br/>
&lt;interactive&gt;:X:Y: Not in scope `toLower'
</code></p>

<p>
Data.Maybeモジュールを読み込んだらData.Charモジュールが消えた。
「追加で」モジュールを読み込みたいときは':m +'または':module +'だ。
</p>

<p><code>% ghci<br/>
Prelude&gt; :m Data.Char<br/>
Prelude Data.Char&gt; :m + Data.Maybe<br/>
Prelude Data.Char Data.Maybe&gt; toLower 'L'<br/>
'l'<br/>
Prelude Data.Char Data.Maybe&gt; fromMaybe 0 (Just 8)<br/>
8</code></p>

<p>これで関数toLowerと関数fromMaybeの両方とも使える。</p>

<h2>ソースファイルにおける読み込み</h2>

<p>ソースファイルでモジュールを読み込むのはimport文だ。</p>

<p><code>import Data.Char</code></p>

<p>
Data.Charモジュールが公開している値をすべて使える。
個人的な使い捨てのコードならこれで良い。
しかし、この形での読み込みでは値がどのモジュール由来なのかわからない。
コードを読みやすくするために以下の2つのどちらか、または両方の形にする。
</p>

<h3>読み込みリストの指定</h3>

<p><code>import Data.Char (toLower, toUpper)</code></p>

<h3>修飾名の指定</h3>

<p><code>import qualified Data.Char as Ch</code></p>

<p>
Data.Charモジュールが公開している値を使うときは修飾名を使う。
Ch.toLowerやCh.toUpperとする。
</p>

<h2>まとめ</h2>

<p>
モジュールの読み込みの基本を学んだ。
実験的だったり練習用のコード以外では
読み込みリストまたは修飾名を指定するように心がける。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/type_driven.html"
	>「型駆動開発」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/polymorphic.html"
	>「多相関数とは」へ</a>
</p>
