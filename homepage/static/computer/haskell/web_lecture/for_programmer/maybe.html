Maybe型

<h2>このタイミングでMaybe型を学ぶ理由</h2>

<p>
本来はもっと後のほうで学ぶべき内容であり、本質を理解するには、
型を学び、代数的データ型を学び、多相型を学ぶ必要がある。
しかし、次の「パターンマッチ」を学ぶうえで、
何らかの構成的な型の例がないとわかりにくい。
よってここではMaybe型の深いところはぬかして、
Maybe型の意義と使いかたのみにしぼって説明する。
</p>

<h2>Maybe型とは</h2>

<p>
Maybe型の値は、Just [値]、またはNothingである。
値が存在しないかもしれない型であり、
値が存在する場合にはJust [値]であり、
存在しない場合にはNothingとなる。
</p>

<h2>Maybe型の存在する意義</h2>

<h3>部分関数</h3>

<p>
部分関数(厳密に言えば全域関数でない部分関数)とは
いくつかの引数に対して値を返さない関数のことである。
逆に全域関数とはすべての引数に対して値を返す関数である。
たとえばf(x) = 1 / xという関数は引数0に対して値を返さないので部分関数である。
</p>

<p>
コードのどこかに部分関数が存在すると意図しないエラーが生じることがある。
このようなエラーはつかまえることが非常に困難になる。
</p>

<h3>例外やNull値</h3>

<p>
多くの言語では、引数に対して値を返さない場合、例外を投げるか
あるいはC言語などではNull値を返す。
しかし、例外やNullは補足されずに放置されても気がつかない場合がある。
</p>

<h3>Maybe型を使うと</h3>

<p>
Maybe型を使うと、実際に使う値を取り出すには、
Just [値]から[値]を取り出す必要がある。
よって、なかの値を使うときには「失敗の可能性がある」ということを意識することになる。
</p>

<h2>Maybe型を見てみる</h2>

<p>対話環境でMaybe型を見てみよう。</p>

<pre><code>% ghci
Prelude&gt; Just 8
Just 8
Prelude&gt; Nothing
Nothing</code></pre>

<p>
Just 8は計算が成功し結果の値が8であることを意味すると考える。
Nothingは計算が失敗したことを意味する。
Maybe型の値を直接入力したので、Maybe型の意味がわかりにくいが、
これらの値を返す関数を想像してみよう。
引数xが0であったときにはNothingを返し、そうでない場合にはJust (1 / x)を
返す関数などである。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/operator.html"
	>「演算子」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/pattern_match.html"
	>「パターンマッチ」へ</a>
</p>
