GHCi: 対話環境に触れる

<h2>はじめに</h2>

<p>
Haskell Platform
(<a href="https://www.haskell.org/platform/windows.html">Windows</a>,
<a href="https://www.haskell.org/platform/mac.html">Mac</a>,
<a href="https://www.haskell.org/platform/linux.html">Linux</a>)を
インストールする。
</p>

<h2>GHCのチェック</h2>

<p>
ターミナルから以下のように入力する。
先頭の'%'はターミナルに対する入力であることを示すためなので入力しない。
</p>

<code>% ghc --version<br/>
The Glorious Glasgow Haskell Compilation System, version X.Y.Z</code>

<p>X.Y.Zはバージョン番号。</p>

<h2>対話環境の開始と終了</h2>

<p>対話環境を立ち上げる。</p>

<pre><code>% ghci
Prelude&gt;</code></pre>

<p>
Prelude&gt;はプロンプトだ。まずは終わらせかたを知ろう。
プロンプトに':quit'を入力しリターンキーを入力する。
':q'でも良い。
</p>

<pre><code>Prelude&gt; :quit</code></pre>

<h2>値の入力</h2>

<p>値を入力してみよう。</p>

<pre><code>% ghci
Prelude&gt; 4492
4492
Prelude&gt; 'c'
'c'
Prelude&gt; pi
3.141592653589793</code></pre>

<p>
対話環境は入力した式を評価し結果を表示する。
4492や'c'はリテラルでそのまま出力される。
piは定義済みの変数だ。円周率の値に束縛されている。
</p>

<h3>変数it</h3>

<p>
対話環境で評価した値は自動的に変数itを束縛する。
</p>

<p><code>Prelude&gt; 344925345991 * 36251192382<br/>
12503955074947653440562</code></p>

<p>
演算子(*)は乗算だ。返された結果に15をかける。
</p>

<p><code>Prelude&gt; it * 15<br/>
187559326124214801608430</code></p>

<h2>定義ファイルの読み込み</h2>

<h3>学習の流れ</h3>

<p>入出力を学ぶまでは以下の流れで進める。</p>

<ol>
<li>関数を定義したファイルを作成</li>
<li>対話環境(GHCi)に読み込む</li>
<li>値を評価し結果を表示</li>
<li>ファイルを編集</li>
<li>再読み込み</li>
<li>値を評価し結果を表示</li>
<li>4から6をくりかえす</li>
</ol>

<h3>リンゴが好き</h3>

<p>ファイルの読み込みの練習だ。fruits.hsを作成する。</p>

<p><a href="/computer/haskell/web_lecture/for_programmer/00_touch_ghci/fruits_1.hs"
	>fruits.hs</a></p>

<p><code>myFavoriteFruit = "apple"</code></p>

<p>引数としてファイル名を指定しghciを立ち上げる。</p>

<p><code>ghci fruits.hs<br/>
*Main&gt; </code></p>

<p>myFavoriteFruitと入力しリターンキーを入力する。</p>

<p><code>*Main&gt; myFavoriteFruit<br/>
"apple"</code></p>

<h3>バナナが好き</h3>

<p>
リンゴよりもバナナのほうが好きだ。
対話環境はそのまま走らせておきエディタでfruit.hsを編集する。
</p>

<p><a href="/computer/haskell/web_lecture/for_programmer/00_touch_ghci/fruits_2.hs"
	>fruits.hs</a></p>

<p><code>myFavoriteFruit = "banana"</code></p>

<p><code>*Main&gt; myFavoriteFruit<br/>
"apple"</code></p>

<p>「変更が反映されない!」。再読み込みする。':reload'か':r'を入力する。</p>

<p><code>*Main&gt; :reload<br/>
*Main&gt; myFavoriteFruit<br/>
"banana"</code></p>

<h2>まとめ</h2>

<p>
Haskell Platformには、コンパイラ、インタプリタ、対話環境だけでなく、
パッケージ管理ソフトやドキュメントの自動生成ソフト、標準的なライブラリが入っている。
入出力について学ぶまでは対話環境で学習を進める。
対話環境はghciコマンドで開始し':q'で終了する。
定義ファイルを読み込むにはそのファイル名を引数にしてghciを立ち上げる。
ファイルを編集したら:reloadで再読み込みする。
</p>

<h2>課題</h2>

<ol>
<li>ghciを立ち上げて自分の生まれた日を入力せよ</li>
<li>自分の名前のイニシャル(1文字)を入力せよ
	<ul>
	<li>文字は前後を'で囲んで入力する</li>
	</ul></li>
<li>myFavoriteColor変数を定義したファイルを作成せよ
	<ul>
	<li>2番目に好きな色で定義する</li>
	<li>対話環境に読み込み表示する</li>
	<li>1番好きな色に変更する</li>
	<li>再読み込みして表示する</li>
	</ul></li>
</ol>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/whats_function.html"
	>「関数とは何か」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/make_function.html"
	>「関数を作る」へ</a>
</p>
