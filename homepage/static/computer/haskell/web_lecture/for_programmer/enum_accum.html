リストによる「くりかえし」: 列挙と蓄積

<h2>0からnまで整数の和</h2>

<h3>手続き的に</h3>

<ol>
<li>変数i, sを用意</li>
<li>i, sを0に初期化</li>
<li>sにiを足したものをsに代入</li>
<li>iに1を足したものをiに代入</li>
<li>iがn以下なら3へ、そうでないなら6へ</li>
<li>sを返す</li>
</ol>

<h3>リストで</h3>

<ol>
<li>0からnまでの整数のリストを作成</li>
<li>リストの要素の総和を返す</li>
</ol>

<h3>比較</h3>

<p>手続き的なほうは</p>

<ul>
<li>正しさが自明でない</li>
<li>機械の気持ちになって手続きを追う</li>
<li>正しいのはiがn以下、それともn未満、あるいはn+1以下?</li>
</ul>

<p>リストを使う方法では</p>

<ul>
<li>手続きではなく構造を記述、そのため</li>
<li>アルゴリズムの正しさは自明</li>
</ul>

<h2>実際にやってみる</h2>

<p>
「0からnまでの整数から成るリストを作成」が「列挙」だ。
「要素の総和を求める」が「蓄積」だ。
</p>

<h3>列挙</h3>

<p><code>[0 .. n]</code></p>

<h3>蓄積</h3>

<p>関数sumはリストの総和を返す。</p>

<h3>コード</h3>

<p><a href="/computer/haskell/web_lecture/for_programmer/09_enum_accum/sumN.hs"
	>sumN.hs</a></p>

<pre><code>sumN :: Integer -&gt; Integer
sumN n = sum [0 .. n]</code></pre>

<h3>実行</h3>

<p><code>% ghci sumN.hs<br/>
*Main&gt; sumN 10<br/>
55</code></p>

<h2>まとめ</h2>

<p>
リストの要素の数え上げが列挙だ。
要素をひとつの値にまとめることが蓄積だ。
「くりかえし」はリストを使った列挙と蓄積で書ける。
リストを使うと手続きではなく計算の構造自体を表現できる。
</p>

<h2>課題</h2>

<ol>
<li>1からnまでの積を求める関数productNを作成せよ
	<ul>
	<li>関数productはリストの要素の積を返す</li>
	</ul></li>
</ol>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/uncurry.html"
	>「非カリー化」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/filter.html"
	>「ろ過」へ</a>
</p>
