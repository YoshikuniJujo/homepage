リストによる「くりかえし」: 列挙と蓄積

<h2>0からnまで整数の和</h2>

<p>
0からnまでの整数の和を考える。
手続き的に考えると以下のようになる。
</p>

<ol>
<li>変数i, sを用意する</li>
<li>iとsを0に初期化</li>
<li>sにiを足したものをsに代入</li>
<li>iに1を足したものをkに代入</li>
<li>iがn以下なら3へ、そうでないなら5へ</li>
<li>sが求める結果となる</li>
</ol>

<p>リストを使うと以下のようになる。</p>

<ol>
<li>0からnまでの整数を列挙したリストを作成</li>
<li>上記リストの要素の総和を求める</li>
</ol>

<p>手続き的に考えたほうは</p>

<ul>
<li>本当に正しいのかどうかが自明ではない</li>
<li>機械の気持ちになって手続きを追う必要がある</li>
<li>正しいのはiがn以下、それともn未満、あるいはn+1以下?</li>
</ul>

<p>リストを使う方法では</p>

<ul>
<li>手続きではなく構造を記述している、そのため</li>
<li>アルゴリズムが正しいことは自明である</li>
</ul>

<h2>実際にやってみる</h2>

<p>
「0からnまでの整数を列挙する」という段階を「列挙」と呼び、
「要素の総和を求める」という段階を「蓄積」と呼ぶ。
0からnまでの整数を列挙するには以下のようにすれば良い。
</p>

<pre><code>[0 .. n]</code></pre>

<p>
また、リストの総和を求めるのに、関数sumが用意されている。
よって求める「0からnまでの整数の総和」は以下のように計算することができる。
</p>

<p><a href="/computer/haskell/web_lecture/for_programmer/09_enum_accum/sumN.hs"
	>sumN.hs</a></p>

<pre><code>sumN :: Integer -&gt; Integer
sumN n = sum [0 .. n]</code></pre>

<p>試してみる。</p>

<pre><code>ghci sumN.hs
*Main&gt; sumN 10
55</code></pre>

<h2>まとめ</h2>

<p>
リストの要素をひとつずつ数え上げていく段階を列挙と呼び、
それらの要素をひとつの値にまとめる段階を蓄積と呼ぶ。
単純な「くりかえし」は、リストを使った列挙と蓄積で表現することができる。
このような、リストを使った「くりかえし」の表現にすると、
手続きではなく構造を表現できるので、
計算結果が正しいものであるかどうかを確かめやすくなる。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/uncurry.html"
	>「非カリー化」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/filter.html"
	>「ろ過」へ</a>
</p>
