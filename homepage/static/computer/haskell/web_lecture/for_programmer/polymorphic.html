多相関数とは

<h2>複数の型を扱う</h2>

<p>多相関数とは</p>

<ul>
<li>複数の型の値に適用可能である、または</li>
<li>複数の型のうちどれかの型の値を返す</li>
</ul>

<p>のどちらかまたは両方である関数だ。</p>

<h2>2種類の多相関数</h2>

<p>
多相性にはパラメトリック多相とアドホック多相がある。
アドホック多相は型クラスによる多相性だ。まずはパラメトリック多相を学ぶ。
</p>

<h3>パラメトリック多相</h3>

<p>
構造に作用し、なかの値の型を問わないのがパラメトリック多相だ。
関数fromMaybeはMaybe型の値からなかの値をとりだす。
第1引数にデフォルト値を第2引数にMaybe値を与える。
</p>

<p><code>% ghci<br/>
Prelude&gt; :m Data.Maybe<br/>
Prelude Data.Maybe&gt; fromMaybe 0 (Just 123)<br/>
123<br/>
Prelude Data.Maybe&gt; fromMaybe 0 Nothing<br/>
0</code></p>

<p>
Just値からはなかの値をとりだす。Nothingならデフォルト値を返す。
この操作はMaybeに包まれる値の型を問わない。
</p>

<p><code>fromMaybe :: a -&gt; Maybe a -&gt; a</code></p>

<p>
aは型変数だ。型変数には小文字からはじまる識別子が使われる。
どの型をいれても良い。同じ型変数には同じ型がはいる。
</p>

<p><code>Integer -&gt; Maybe Integer -&gt; Integer<br/>
Char -&gt; Maybe Char -&gt; Char<br/>
Bool -&gt; Maybe Bool -&gt; Bool</code></p>

<p>同じ型変数に異なる型をいれてはいけない。</p>

<p><code>Integer -&gt; Maybe Bool -&gt; Char (これはだめ)</code></p>

<h2>制御構造として</h2>

<p>
多相関数は値自体ではなく構造を扱う。
多相関数が実現する機能は多くの言語で制御構造として特殊な構文となる。
Haskellでは制御構造を関数として定義できる。
</p>

<h2>まとめ</h2>

<p>
なかの値ではなく構造を扱う関数は多相関数として定義できる。多くは高階関数だ。
広い用途に使える制御構造を特殊な構文ではなく関数として定義できる。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/import.html"
	>「モジュールの読み込み」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/fromMaybe.html"
	>「Maybe値からの値の取り出し」へ</a>
</p>
