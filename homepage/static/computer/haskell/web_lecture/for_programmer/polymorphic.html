多相関数

<p>(工事中 5%)</p>

<h2>多相関数とは</h2>

<p>複数の型の値に適用可能な関数があり、これを多相関数と呼ぶ。</p>

<h2>関数id</h2>

<h3>動作</h3>

<p>
最も単純な多相関数に関数idがある。
まずは動作を見てみよう。
</p>

<pre><code>% ghci
Prelude&gt; id 8
8
Prelude&gt; id "hello"
"hello"
Prelude&gt; id 'c'
'c'</code></pre>

<p>
関数idは引数と同じ値を返す関数である。
つまり、id 8と書くのと8と書くのとは同じことである。
「同じ値を返す」という動作はどのような型でも可能だ。
つまり関数idはすべての型の値を引数と(し返り値と)することができる。
関数定義は以下のようになる。</p>

<pre><code>id x = x</code></pre>

<h3>使い道</h3>

<p>
関数idなんて何のためにあるの。
なんでこんな関数が標準ライブラリにあるのだろうか。
と、思うかもしれない。
しかし、この関数が意外と使えるのだ。
学習が進むといろいろな例が挙げられるのだが、
今のところは人工的な例でがまんしていただきたい。
</p>

<p>
第1引数で第2引数を割った値を返す関数を作りたい。
ただし、第1引数が0だった場合には第2引数をそのまま返すようにする。
こんな関数を作ってみよう。
素直に作ると以下のようになる。
</p>

<pre><code>devide :: Double -&gt; Double -&gt; Double
devide 0 b = b
devide a b = b / a</code></pre>

<p>
この定義はもっと簡潔にできる。
まず、2行目は演算子の部分適用を使って、<code
>devide a = (/ a)</code>のように書ける。
つまり「devide aは何かをaで割ったものである」ということだ。
それでは1行目はどうなるだろうか。
ここに関数idが使える。<code>devide 0 = id</code>となる。
これは「devide 0は引数をそのまま返す関数である」ということになる。
</p>

<p><a
href="/computer/haskell/web_lecture/for_programmer/05_polymorphic/id.hs"
	>id.hs</a></p>

<pre><code>devide :: Double -&gt; Double -&gt; Double
devide 0 = id
devide a = (/ a)</code></pre>

<p>
仮引数を減らすことでより「直接的」な表現になる。
対話環境で試してみよう。
</p>

<pre><code>% ghci id.hs
*Main&gt; devide 6 9
1.5
*Main&gt; devide 0 8
8.0</code></pre>

<h3>型</h3>

<p>
関数idの型はどうなっているのだろうか。
たとえばid 8では関数idの型は以下のようになる。
</p>

<pre><code>Integer -&gt; Integer</code></pre>

<p>id "hello"では以下のようになる。</p>

<pre><code>String -&gt; String</code></pre>

<p>
つまり[型X] -&gt; [型X]のような形になっていることがわかる。
引数と返り値の型が同じであれば、どのような型でも良い。
これを表現するには「型変数」が使える。
型変数は小文字で始まる識別子であり、しばしば小文字1文字で表される。
idの型は以下のようになる。
</p>

<pre><code>a -&gt; a</code></pre>

<p>
何でも良いので型aの値を取って、同じ型である型aの値を返すということだ。
対話環境で関数idの型を確認してみよう。
</p>

<pre><code>% ghci
Prelude&gt; :t id
id :: a -&gt; a</code></pre>

<h2>関数const</h2>

<p>(作成中)</p>

<h2>演算子($)</h2>

<p>(作成中)</p>

<h2>演算子(.)</h2>

<p>(作成中)</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/type_driven.html"
	>「型駆動開発」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer"
	>「1から学ぶHaskell」トップへ</a>
</p>
