多相関数とは

<h2>複数の型に適用可能</h2>

<p>
多相関数とは複数の型に適用可能であるか、複数の型のうちどれかの型を返すか、
またはその両方の性質を持つ関数だ。
</p>

<h2>2種類の多相関数</h2>

<p>
多相性にはパラメトリック多相とアドホック多相とがある。
アドホック多相は型クラスのところで説明する。
ここではパラメトリック多相を扱う。
</p>

<h3>パラメトリック多相</h3>

<p>
パラメトリック多相は型や関数の構造として値の中身が問題にならないために、
どの型でも取ることができるという意味での多相性だ。
Maybe型から値をとりだすfromMaybeという関数がある。
第1引数にデフォルト値を第2引数にMaybe値を与える。
</p>

<p><code>% ghci<br/>
Prelude&gt; :m Data.Maybe<br/>
Prelude Data.Maybe&gt; fromMaybe 0 (Just 123)<br/>
123<br/>
Prelude Data.Maybe&gt; fromMaybe 0 Nothing<br/>
0</code></p>

<p>
Just値からは値をとりだす。
Nothingならデフォルトの値を返す。
この操作はMaybeが包む値の型の影響を受けない。
型は以下のようになる。
</p>

<p><code>fromMaybe :: a -&gt; Maybe a -&gt; a</code></p>

<p>
'a'は型変数だ。
型変数には小文字からはじまる識別子が使われる。
どの型でもここにいれられる。
同じ型変数には同じ型がはいる。
fromMaybeの型として正しいものを挙げる。
</p>

<p><code>Integer -&gt; Maybe Integer -&gt; Integer<br/>
Char -&gt; Maybe Char -&gt; Char<br/>
Bool -&gt; Maybe Bool -&gt; Bool</code></p>

<p>以下はfromMaybeの型として正しくない。</p>

<p><code>Integer -&gt; Maybe Bool -&gt; Char</code></p>

<h2>制御構造として</h2>

<p>
多相関数は値自体ではなく構造をあつかう関数だ。
多相関数が実現する機能の多くはHaskell以前の言語では制御構造として特殊な構文となる。
Haskellでは他の言語で特殊な構文となる制御構造を単なる関数として定義できる。
</p>

<h2>まとめ</h2>

<p>
Haskellでは値自体に影響しない関数を多相関数として定義できる。
値自体ではなく構造を扱う関数だ。
それらの多くは高階関数でもある。
広く使うことのできる制御構造を特殊な構文ではなく関数として定義できる。
多相関数の例をわかりやすいものから見ていこう。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/import.html"
	>「モジュールの読み込み」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/fromMaybe.html"
	>「Maybe型からの値の取り出し」へ</a>
</p>
