構文: リスト内包表記1

<h2>はじめに</h2>

<p>
リスト内包表記という記法がある。
まずは単純な例を見ていくことで考えかたを理解しよう。
</p>

<h3>構文糖</h3>

<p>
リスト内包表記はプログラミングという側面から見れば構文糖である。
最も単純な例であれば関数mapを使った表記に脱糖されると考えて良い。
</p>

<h3>集合論</h3>

<p>
「表記」という側面ではリスト内包表記は集合論における表記を借りてきたものだ。
</p>

<h2>リストの要素を2倍にする</h2>

<p>リスト[2, 3, 5]のすべての要素を2倍にするには</p>

<p><code>map (* 2) [2, 3, 5]</code></p>

<p>とすれば良い。仮引数を明示すると</p>

<p><code>map (\n -&gt; n * 2) [2, 3, 5]</code></p>

<p>となる。これをリスト内包表記で書くと</p>

<p><code>[ n * 2 | n &lt;- [2, 3, 5] ]</code></p>

<p>
となる。
リストのそれぞれの要素2, 3, 5で順にnを束縛しそれぞれについてn * 2を求める。
</p>

<p><code>% ghci<br/>
Prelude&gt; [ n * 2 | n &lt;- [2, 3, 5] ]<br/>
[4,6,10]</code></p>

<h2>構文</h2>

<p>
全体は[]で囲まれる。
|で左と右に分けられ左側が結果の値となり右側がリストからの値の取り出しとなる。
</p>

<p><code>[ 結果 | パターン &lt;- リストを返す表現 ]</code></p>

<p>
リストから取り出された値がパターンによって変数を束縛し
それを使って結果が計算される。
リストのすべての要素についてこれが行われ結果は再びリストにまとめられる。
</p>

<h2>脱糖</h2>

<p><code>[ 結果 | パターン &lt;- リスト ]</code></p>

<p>は</p>

<p><code>map (\パターン -&gt; 結果) リスト</code></p>

<p>のように脱糖される。</p>

<h2>まとめ</h2>

<p>
関数mapの実現する機能である「リストのすべての要素について何かをする」を
読みやすく表現できるリスト内包表記について学んだ。
リスト内包表記はより複雑なことも実現できる。
</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/filter_concatmap.html"
	>「関数concatMapによる関数filterの定義」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/list_comprehensions2.html"
	>「リスト内包記表2」へ</a>
</p>
