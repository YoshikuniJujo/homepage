2種類の整数型

<h2>はじめに</h2>

<p>
整数値の型について学ぶ。
ここまでは整数値の型としてIntegerのみを見てきた。
Integer型の値を使う場合にはメモリの使用量以外に値の範囲について
考える必要がない。
しかし、実効効率の関係上Haskellではデフォルトで別の整数型を使うようになっている
標準的な関数がいくつかある。
</p>

<h2>多倍長整数</h2>

<p>
Integer型の値は
使用可能なメモリ以外に制限のない整数で理論的には-∞から∞の範囲を表現可能だ。
</p>

<p><code>% ghci<br/>
Prelude&gt; 3<br/>
3<br/>
Prelude&gt; :t it<br/>
it :: Integer<br/>
Prelude&gt; 12345678901234567890123467890<br/>
123456789012345678901234567890</code></p>

<p>
これはとても便利だ。
</p>

<h2>固定長整数</h2>

<p>
標準的な関数のうちのいくつかはInteger型の値ではなく
固定長整数であるInt型の値を使用する。
リストの長さを計算する関数lengthなどだ。
</p>

<p><code>Prelude&gt; length "Hello"<br/>
5<br/>
Prelude&gt; :t it<br/>
it :: Int<br/>
Prelude&gt; length
["Clean", "FP", "Gofer", "Hope", "Hope+", "Id", "ISWIM", "KRC", "Lisp", "Miranda",
"ML", "Standard ML", "Orwell", "SASL", "SISAL", "Scheme"]<br/>
16<br/>
</code></p>

<h3>範囲</h3>

<p>
Haskell 2010によれば、
Int型の値はすくなくとも-2^29から2^29-1までの範囲を含む整数型である。
</p>

<p><a href="https://www.haskell.org/onlinereport/haskell2010/haskellch18.html#x26-22400018.1"
	>Haskell 2010 language report: 18.1 Signed integer types</a></p>

<p>
GHCではInt型の値を処理系以存の範囲を持つ型としている。
つまり32ビットマシンでは-2^31から2^31-1までの範囲となり、
64ビットマシンでは-2^63から2^63-1までの範囲となる。
</p>

<p><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/bugs-and-infelicities.html#haskell-98-2010-undefined"
	>The Glorious Glasgow Haskell Compilation System User's Guide: GHC's interpretation of undefined behaviour in Haskell 98 and Haskell 2010</a>

<p>minBound, maxBoundという値を使うことで確認できる。</p>

<p><code>Prelude&gt; minBound :: Int<br/>
-2147483648<br/>
Prelude&gt; maxBound :: Int<br/>
2147483647<br/>
Prelude&gt; 2 ^ 31<br/>
2147483648</code></p>

<h2>嫌なバグ</h2>

<p>Int型を使っているとときどき嫌なバグに遭遇する。</p>

<p><code>Prelude&gt; let n = maxBound :: Int<br/>
Prelude&gt; n<br/>
2147483647<br/>
Prelude&gt; n + 1<br/>
-2147483648</code></p>

<p>注意が必要だ。</p>

<p>
<a href="/computer/haskell/web_lecture/for_programmer/about_montecarlo.html"
	>「モンテカルロ法の説明」へもどる</a>
<a href="/computer/haskell/web_lecture/for_programmer/randoms.html"
	>「疑似乱数列の生成」へ</a>
</p>
